{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///D:/trust-market/frontend/utils/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:5000/api\",\r\n});\r\n\r\n// Automatically send token in every request\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,MAAM,qHAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AAEA,4CAA4C;AAC5C,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/trust-market/frontend/pages/dashboard/my-posts.js"],"sourcesContent":["// pages/dashboard/my-posts.js\r\nimport { useEffect, useState } from \"react\";\r\nimport api from \"../../utils/api\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function MyPosts() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState(null);\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // ðŸ”¹ Correct route: just \"/auth/me\", not \"/api/auth/me\"\r\n        const res = await api.get(\"/auth/me\");\r\n        setUser(res.data);\r\n\r\n        // ðŸ”¹ Load user's posts\r\n        const postsRes = await api.get(\"/posts/my-posts\");\r\n        setPosts(postsRes.data);\r\n      } catch (err) {\r\n        console.log(\"Auth failed:\", err.response?.data || err);\r\n        localStorage.removeItem(\"token\"); // Clear invalid token\r\n        router.push(\"/login\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    init();\r\n  }, []);\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center mt-10\">Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      {/* Navbar */}\r\n      <header className=\"bg-white shadow-md p-4 flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-extrabold text-blue-600\">Trust Market</h1>\r\n        <nav className=\"hidden md:flex items-center space-x-6 text-gray-700 font-medium\">\r\n          <Link href=\"/\" className=\"hover:text-blue-600\">Home</Link>\r\n          <Link href=\"/dashboard/my-posts\" className=\"text-blue-600 font-semibold\">My Posts</Link>\r\n          <Link href=\"/dashboard/account\" className=\"hover:text-blue-600\">Account</Link>\r\n          <Link href=\"/dashboard/favorites\" className=\"hover:text-blue-600\">Favorites</Link>\r\n          <button onClick={logout} className=\"text-red-600 hover:text-red-700\">Logout</button>\r\n        </nav>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"p-6 max-w-4xl mx-auto\">\r\n        <h2 className=\"text-center text-3xl font-bold mb-6\">My Posts</h2>\r\n\r\n        {posts.length === 0 ? (\r\n          <p className=\"text-center text-gray-500\">You have no posts yet.</p>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {posts.map((post) => (\r\n              <div\r\n                key={post._id}\r\n                className=\"bg-white p-4 rounded-xl shadow-md cursor-pointer hover:shadow-lg transition\"\r\n                onClick={() => router.push(`/post/${post._id}`)}\r\n              >\r\n                {post.images?.length > 0 ? (\r\n                  <img\r\n                    src={`http://localhost:5000/uploads/${post.images[0]}`}\r\n                    alt={post.title}\r\n                    className=\"w-full h-48 object-cover rounded-lg mb-3\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center rounded-lg mb-3\">\r\n                    <span className=\"text-gray-500\">No Image</span>\r\n                  </div>\r\n                )}\r\n\r\n                <h3 className=\"text-lg font-bold\">{post.title}</h3>\r\n                <p className=\"text-gray-600 mt-1\">{post.description}</p>\r\n                <p className=\"text-gray-800 font-semibold mt-2\">{post.price} BDT</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAC9B;AACA;AACA;AACA;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,gJAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,IAAA,gHAAS,EAAC;QACR,MAAM,OAAO;YACX,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,IAAI;gBACF,wDAAwD;gBACxD,MAAM,MAAM,MAAM,4HAAG,CAAC,GAAG,CAAC;gBAC1B,QAAQ,IAAI,IAAI;gBAEhB,uBAAuB;gBACvB,MAAM,WAAW,MAAM,4HAAG,CAAC,GAAG,CAAC;gBAC/B,SAAS,SAAS,IAAI;YACxB,EAAE,OAAO,KAAK;gBACZ,QAAQ,GAAG,CAAC,gBAAgB,IAAI,QAAQ,EAAE,QAAQ;gBAClD,aAAa,UAAU,CAAC,UAAU,sBAAsB;gBACxD,OAAO,IAAI,CAAC;YACd,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,SAAS,qBAAO,qKAAC;QAAE,WAAU;kBAAoB;;;;;;IAErD,qBACE,qKAAC;QAAI,WAAU;;0BAEb,qKAAC;gBAAO,WAAU;;kCAChB,qKAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,qKAAC;wBAAI,WAAU;;0CACb,qKAAC,4IAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAsB;;;;;;0CAC/C,qKAAC,4IAAI;gCAAC,MAAK;gCAAsB,WAAU;0CAA8B;;;;;;0CACzE,qKAAC,4IAAI;gCAAC,MAAK;gCAAqB,WAAU;0CAAsB;;;;;;0CAChE,qKAAC,4IAAI;gCAAC,MAAK;gCAAuB,WAAU;0CAAsB;;;;;;0CAClE,qKAAC;gCAAO,SAAS;gCAAQ,WAAU;0CAAkC;;;;;;;;;;;;;;;;;;0BAKzE,qKAAC;gBAAK,WAAU;;kCACd,qKAAC;wBAAG,WAAU;kCAAsC;;;;;;oBAEnD,MAAM,MAAM,KAAK,kBAChB,qKAAC;wBAAE,WAAU;kCAA4B;;;;;6CAEzC,qKAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,qBACV,qKAAC;gCAEC,WAAU;gCACV,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,GAAG,EAAE;;oCAE7C,KAAK,MAAM,EAAE,SAAS,kBACrB,qKAAC;wCACC,KAAK,CAAC,8BAA8B,EAAE,KAAK,MAAM,CAAC,EAAE,EAAE;wCACtD,KAAK,KAAK,KAAK;wCACf,WAAU;;;;;6DAGZ,qKAAC;wCAAI,WAAU;kDACb,cAAA,qKAAC;4CAAK,WAAU;sDAAgB;;;;;;;;;;;kDAIpC,qKAAC;wCAAG,WAAU;kDAAqB,KAAK,KAAK;;;;;;kDAC7C,qKAAC;wCAAE,WAAU;kDAAsB,KAAK,WAAW;;;;;;kDACnD,qKAAC;wCAAE,WAAU;;4CAAoC,KAAK,KAAK;4CAAC;;;;;;;;+BAlBvD,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;;AA0B7B","debugId":null}}]
}