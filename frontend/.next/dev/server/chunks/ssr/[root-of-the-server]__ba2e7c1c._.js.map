{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nazmul/OneDrive/Documents/trust-market/frontend/utils/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:5000/api\",\r\n});\r\n\r\n// Automatically send token in every request\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,MAAM,qHAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AAEA,4CAA4C;AAC5C,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nazmul/OneDrive/Documents/trust-market/frontend/components/ChatBox.js"],"sourcesContent":["// components/ChatBox.js\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nlet socket;\r\n\r\nexport default function ChatBox({ postId, user, isAdmin }) {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const messagesEndRef = useRef();\r\n\r\n  useEffect(() => {\r\n    socket = io(\"http://localhost:5000\"); // backend URL\r\n\r\n    // join post-specific room\r\n    socket.emit(\"joinRoom\", postId);\r\n\r\n    // listen for new messages\r\n    socket.on(\"newMessage\", (msg) => {\r\n      setMessages((prev) => [...prev, msg]);\r\n      scrollToBottom();\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [postId]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (!input) return;\r\n    const msgData = {\r\n      post: postId,\r\n      sender: user.name,\r\n      senderId: user.id,\r\n      message: input,\r\n      isAdmin: isAdmin || false,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    socket.emit(\"sendMessage\", msgData);\r\n    setInput(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 right-4 w-80 max-h-96 bg-white border rounded-xl shadow-lg flex flex-col\">\r\n      <div className=\"bg-blue-600 text-white p-2 rounded-t-xl font-bold\">Chat</div>\r\n      \r\n      <div className=\"flex-1 overflow-y-auto p-2 space-y-2\">\r\n        {messages.map((m, i) => (\r\n          <div\r\n            key={i}\r\n            className={`p-2 rounded-lg max-w-[75%] ${\r\n              m.senderId === user.id\r\n                ? \"bg-blue-500 text-white ml-auto\"\r\n                : \"bg-gray-300 text-gray-800\"\r\n            }`}\r\n          >\r\n            {m.message}\r\n          </div>\r\n        ))}\r\n        <div ref={messagesEndRef}></div>\r\n      </div>\r\n\r\n      <div className=\"flex p-2 border-t\">\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          className=\"flex-1 border rounded-lg px-2 py-1\"\r\n          placeholder=\"Type a message...\"\r\n        />\r\n        <button\r\n          onClick={sendMessage}\r\n          className=\"ml-2 bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700\"\r\n        >\r\n          Send\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AACxB;;;;;;;;;AAGA,IAAI;AAEW,SAAS,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,iBAAiB,IAAA,6GAAM;IAE7B,IAAA,gHAAS,EAAC;QACR,SAAS,GAAG,0BAA0B,cAAc;QAEpD,0BAA0B;QAC1B,OAAO,IAAI,CAAC,YAAY;QAExB,0BAA0B;QAC1B,OAAO,EAAE,CAAC,cAAc,CAAC;YACvB,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAI;YACpC;QACF;QAEA,OAAO;YACL,OAAO,UAAU;QACnB;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,OAAO;QACZ,MAAM,UAAU;YACd,MAAM;YACN,QAAQ,KAAK,IAAI;YACjB,UAAU,KAAK,EAAE;YACjB,SAAS;YACT,SAAS,WAAW;YACpB,WAAW,IAAI;QACjB;QAEA,OAAO,IAAI,CAAC,eAAe;QAC3B,SAAS;IACX;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAI,WAAU;0BAAoD;;;;;;0BAEnE,qKAAC;gBAAI,WAAU;;oBACZ,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,qKAAC;4BAEC,WAAW,CAAC,2BAA2B,EACrC,EAAE,QAAQ,KAAK,KAAK,EAAE,GAClB,mCACA,6BACJ;sCAED,EAAE,OAAO;2BAPL;;;;;kCAUT,qKAAC;wBAAI,KAAK;;;;;;;;;;;;0BAGZ,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAU;wBACV,aAAY;;;;;;kCAEd,qKAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nazmul/OneDrive/Documents/trust-market/frontend/pages/index.js"],"sourcesContent":["// pages/index.js\r\nimport { useEffect, useState } from \"react\";\r\nimport api from \"../utils/api\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport ChatBox from \"../components/ChatBox\";\r\nimport { Menu, MessageCircle, User, Home, PlusCircle, ShoppingCart, Heart } from \"lucide-react\";\r\n\r\nexport default function HomePage() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [category, setCategory] = useState(\"all\");\r\n  const [showCategory, setShowCategory] = useState(false);\r\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\r\n\r\n  // ðŸ”¥ Chat Popup States\r\n  const [showChat, setShowChat] = useState(false);\r\n  const [chatPostId, setChatPostId] = useState(null);\r\n\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const loadPosts = async () => {\r\n      try {\r\n        const res = await api.get(\"/posts\");\r\n        setPosts(res.data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load posts\", err);\r\n      }\r\n    };\r\n    loadPosts();\r\n  }, []);\r\n\r\n  const handleBuy = (postId) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"Please login first!\");\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n    router.push(`/post/${postId}`);\r\n  };\r\n\r\n  // ðŸ”¥ FIXED MESSAGE BUTTON (Now opens Chat Popup)\r\n  const handleMessage = (postId) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"Please login to send messages!\");\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    setChatPostId(postId);\r\n    setShowChat(true);\r\n  };\r\n\r\n  const handleCreatePost = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"Please login to create a post!\");\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n    router.push(\"/create-post\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n\r\n      {/* NAVBAR START */}\r\n      <header className=\"bg-white shadow-md p-4 flex justify-between items-center relative\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Home className=\"text-blue-600 w-6 h-6\" />\r\n          <h1 className=\"text-2xl font-extrabold text-blue-600 tracking-wide\">Trust Market</h1>\r\n        </div>\r\n\r\n        <nav className=\"hidden md:flex space-x-8 text-gray-700 font-medium items-center\">\r\n          <Link href=\"/\" className=\"hover:text-blue-600 transition flex items-center gap-1\">Home</Link>\r\n          <button onClick={() => setShowCategory(!showCategory)} className=\"hover:text-blue-600 transition flex items-center gap-1\">\r\n            <Menu className=\"w-4 h-4\" /> Categories\r\n          </button>\r\n          <Link href=\"/messages\" className=\"hover:text-blue-600 transition flex items-center gap-1\">\r\n            <MessageCircle className=\"w-4 h-4\" /> Messages\r\n          </Link>\r\n          <Link href=\"/dashboard\" className=\"hover:text-blue-600 transition flex items-center gap-1\">\r\n            <User className=\"w-4 h-4\" /> Account\r\n          </Link>\r\n\r\n          <button onClick={handleCreatePost} className=\"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700 transition ml-4\">\r\n            <PlusCircle className=\"w-5 h-5\" /> Create Post\r\n          </button>\r\n        </nav>\r\n\r\n        {/* Mobile Menu */}\r\n        <div className=\"md:hidden flex items-center gap-2\">\r\n          <button onClick={() => setShowMobileMenu(!showMobileMenu)}>\r\n            <Menu className=\"w-6 h-6 text-blue-600\" />\r\n          </button>\r\n          <button onClick={handleCreatePost} className=\"bg-blue-600 text-white px-3 py-1 rounded-lg flex items-center gap-1\">\r\n            <PlusCircle className=\"w-5 h-5\" /> Post\r\n          </button>\r\n        </div>\r\n      </header>\r\n      {/* NAVBAR END */}\r\n\r\n      {/* Category Bar */}\r\n      <div className=\"bg-white border-b p-3 flex justify-center gap-4 flex-wrap\">\r\n        {[\"All\", \"Gaming\", \"Facebook Page\", \"Website\", \"YouTube Channel\"].map(cat => (\r\n          <button\r\n            key={cat}\r\n            onClick={() => setCategory(cat.toLowerCase())}\r\n            className={`px-4 py-2 rounded-full border transition ${category === cat.toLowerCase() ? \"bg-blue-600 text-white border-blue-600\" : \"bg-white text-gray-700 hover:bg-blue-50\"}`}\r\n          >\r\n            {cat}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* POST LIST */}\r\n      <main className=\"max-w-7xl mx-auto p-6\">\r\n        <h2 className=\"text-3xl font-bold mb-8 text-center text-gray-800\">Explore Our Latest Posts</h2>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\r\n          {posts\r\n            .filter(p => category === \"all\" || p.category?.toLowerCase() === category)\r\n            .map(post => (\r\n              <div key={post._id} className=\"bg-white rounded-2xl shadow-lg p-4 flex flex-col\">\r\n\r\n                {post.images?.length > 0 && (\r\n                  <img src={`http://localhost:5000/uploads/${post.images[0]}`} className=\"w-full max-h-72 object-cover rounded-xl mb-3\" />\r\n                )}\r\n\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-1\">{post.title}</h3>\r\n                <p className=\"text-gray-600 mb-3 line-clamp-3\">{post.description}</p>\r\n                <p className=\"text-blue-600 font-bold text-lg mb-3\">ðŸ’° {post.price} BDT</p>\r\n\r\n                <div className=\"flex justify-between items-center mt-auto\">\r\n                  <Link href={`/post/${post._id}`} className=\"text-blue-600 hover:underline font-medium flex items-center gap-1\">\r\n                    <Heart className=\"w-4 h-4\" /> View\r\n                  </Link>\r\n\r\n                  {/* ðŸ”¥ Popup Message Button */}\r\n                  <button\r\n                    onClick={() => handleMessage(post._id)}\r\n                    className=\"px-3 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition flex items-center gap-1\"\r\n                  >\r\n                    <MessageCircle className=\"w-4 h-4\" /> Message\r\n                  </button>\r\n\r\n                  <button onClick={() => handleBuy(post._id)} className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition flex items-center gap-1\">\r\n                    <ShoppingCart className=\"w-4 h-4\" /> Buy\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n        </div>\r\n      </main>\r\n\r\n      {/* FOOTER */}\r\n      <footer className=\"bg-white text-center py-4 border-t mt-10 text-gray-500 text-sm\">\r\n        Â© {new Date().getFullYear()} <span className=\"font-semibold text-blue-600\">Trust Market</span> â€” All rights reserved.\r\n      </footer>\r\n\r\n      {/* ðŸ”¥ CHAT POPUP */}\r\n      {showChat && chatPostId && (\r\n        <ChatBox\r\n          postId={chatPostId}\r\n          user={{ id: localStorage.getItem(\"userId\"), name: localStorage.getItem(\"name\") }}\r\n          isAdmin={false}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}