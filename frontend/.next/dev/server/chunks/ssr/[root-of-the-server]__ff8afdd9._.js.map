{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///D:/trust-market/frontend/utils/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:5000/api\",\r\n});\r\n\r\n// Automatically send token in every request\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,MAAM,qHAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AAEA,4CAA4C;AAC5C,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/trust-market/frontend/pages/admin/posts/%5Bid%5D.js"],"sourcesContent":["// frontend/pages/admin/posts/[id].js\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport api from \"../../../utils/api\";\r\nimport { ArrowLeft, X } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function SinglePostAdmin() {\r\n  const router = useRouter();\r\n  const { id } = router.query;\r\n\r\n  const [post, setPost] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Fullscreen modal state\r\n  const [modalContent, setModalContent] = useState(null); // {type: 'image'|'video', src: string}\r\n\r\n  const BASE_URL = \"http://localhost:5000\";\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    fetchPost();\r\n  }, [id]);\r\n\r\n  const fetchPost = async () => {\r\n    try {\r\n      const res = await api.get(`/posts/${id}`);\r\n      setPost(res.data);\r\n\r\n      if (res.data.userId) {\r\n        const userRes = await api.get(`/admin/message-user/${res.data.userId}`);\r\n        setUser(userRes.data);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const incrementViews = async () => {\r\n    try {\r\n      await api.patch(`/posts/${id}/views`);\r\n      setPost(prev => prev ? { ...prev, views: (prev.views || 0) + 1 } : prev);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (!post) return <div className=\"p-4 text-center\">Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-4 md:p-6 bg-white shadow-xl rounded-2xl relative\">\r\n\r\n      {/* Back Button */}\r\n      <div className=\"flex justify-start mb-4\">\r\n        <Link\r\n          href=\"/admin/posts\"\r\n          className=\"flex items-center bg-blue-600 text-white px-3 py-2 rounded-lg shadow hover:bg-blue-700 transition text-sm md:text-base\"\r\n        >\r\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Title */}\r\n      <h1 className=\"text-2xl md:text-4xl font-extrabold mb-4 text-gray-900 break-words\">{post.title}</h1>\r\n\r\n      {/* Description */}\r\n      <p className=\"mb-4 text-gray-700 text-sm md:text-lg break-words\">{post.description}</p>\r\n\r\n      {/* Price & Category */}\r\n      <div className=\"flex flex-wrap gap-2 md:gap-4 mb-4\">\r\n        <span className=\"bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold text-xs md:text-sm\">\r\n          Price: {post.price}\r\n        </span>\r\n        <span className=\"bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-semibold text-xs md:text-sm\">\r\n          Category: {post.category}\r\n        </span>\r\n      </div>\r\n\r\n      {/* Images */}\r\n      {post.images && post.images.length > 0 && (\r\n        <div className=\"flex flex-wrap gap-2 md:gap-3 mb-4\">\r\n          {post.images.map((img, index) => {\r\n            const src = img.startsWith(\"http\") ? img : `${BASE_URL}/uploads/${img}`;\r\n            return (\r\n              <img\r\n                key={index}\r\n                src={src}\r\n                alt={`image-${index}`}\r\n                className=\"w-24 h-24 md:w-40 md:h-40 object-cover rounded-xl shadow-md cursor-pointer hover:opacity-90 transition\"\r\n                onClick={() => setModalContent({ type: \"image\", src })}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Videos */}\r\n      {post.videos && post.videos.length > 0 && (\r\n        <div className=\"flex flex-wrap gap-2 md:gap-3 mb-4\">\r\n          {post.videos.map((vid, index) => {\r\n            const src = vid.startsWith(\"http\") ? vid : `${BASE_URL}/uploads/${vid}`;\r\n            return (\r\n              <video\r\n                key={index}\r\n                className=\"w-48 h-32 md:w-60 md:h-36 rounded-xl shadow-md cursor-pointer hover:opacity-90 transition\"\r\n                onClick={() => setModalContent({ type: \"video\", src })}\r\n                muted\r\n              >\r\n                <source src={src} type=\"video/mp4\" />\r\n              </video>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Contact & Details */}\r\n      <div className=\"space-y-1 md:space-y-2 text-gray-800 mt-4 text-sm md:text-base\">\r\n        {user && <p><span className=\"font-semibold\">Email:</span> {user.email}</p>}\r\n        <p><span className=\"font-semibold\">Phone:</span> {post.phone}</p>\r\n        <p><span className=\"font-semibold\">Date & Time:</span> {new Date(post.createdAt).toLocaleString()}</p>\r\n        <p><span className=\"font-semibold\">Views:</span> {post.views || 0}</p>\r\n      </div>\r\n\r\n      {/* Fullscreen Modal */}\r\n      {modalContent && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4\">\r\n          <button\r\n            className=\"absolute top-4 md:top-6 right-4 md:right-6 text-white bg-gray-800 p-2 rounded-full hover:bg-gray-700\"\r\n            onClick={() => setModalContent(null)}\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n          {modalContent.type === \"image\" ? (\r\n            <img src={modalContent.src} className=\"max-h-full max-w-full object-contain rounded-xl\" />\r\n          ) : (\r\n            <video src={modalContent.src} controls autoPlay className=\"max-h-full max-w-full rounded-xl\" />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}